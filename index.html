<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LyricFind</title>    
  </head>
  <body>
    <h1 style="text-align: center;">LyricFind</h1>
    <div id="search-container">
      <script async src="https://cse.google.com/cse.js?cx=010888020378719548795:kgxc0prnsev"></script>
      <div class="gcse-search"></div>
      <div id="results">
      
      </div>
    </div>

    <div id="connect-container">
      <h1>Welcome to LyricFind</h1>
      <p>Find Songs with just Lyrics!</p>
      <br>
      <button onclick="connectSpotify();" class="btn btn-primary">Log in with Spotify</button>
      <button onclick="continueWithoutSpotify();" class="btn btn-secondary">Log in as Guest</button>
    </div>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

    <button class="btn-start">Start Search By Voice</button>
    <button class="btn-end">End Search By Voice</button>
    <textarea class="output" id="output" placeholder="Copy and Paste Text in to search bar"></textarea>
    
    <script>
    class SpeechRecognitionApi{
    constructor(options) {
    const SpeechToText = window.speechRecognition || window.webkitSpeechRecognition;
    this.speechApi = new SpeechToText();
    this.output = options.output ? options.output : document.createElement('div');
    this.speechApi.continuous = true;
    this.speechApi.internResult = false;
    this.speechApi.onresult = (event) => {
        var resultIndex = event.resultIndex;
        var transcript = event.results[resultIndex][0].transcript;
        this.output.textContent = transcript;
        console.log(this.output)
    }

    }
    init() {
        this.speechApi.start();
    }
    stop(){
        this.speechApi.stop();

    }
}
window.onload = function () {
    var speech = new SpeechRecognitionApi({

        output: document.querySelector(".output")
    })
    console.log(speech)

    document.querySelector(".btn-start").addEventListener("click", () => {
        speech.init();
    })
    document.querySelector(".btn-end").addEventListener("click", () => {
        speech.stop();
    })
}
    </script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0-alpha.1/handlebars.min.js"></script>
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    
    
    <link rel="stylesheet" href="style.css">
    <script src="app.js" type="text/javascript"></script>
  </body>
</html>
